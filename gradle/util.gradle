tasks.register("export-project-name") {
    doLast {
        def sout = new StringBuilder(), serr = new StringBuilder()
        def proc = "$projectDir/gradle/shell/export_project_name.sh $project.name".execute()
        proc.consumeProcessOutput(sout, serr)
        proc.waitForOrKill(1000)
        println "$sout$serr"
    }
}

tasks.test.dependsOn("export-project-name")